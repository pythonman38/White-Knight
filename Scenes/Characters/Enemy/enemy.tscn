[gd_scene load_steps=7 format=3 uid="uid://belp25krgaful"]

[ext_resource type="Script" uid="uid://r1yc2jc7d3c8" path="res://Scripts/Characters/Enemy/enemy.gd" id="1_flmpx"]
[ext_resource type="PackedScene" uid="uid://b400ggo706fli" path="res://Scenes/Characters/rig.tscn" id="2_0pqjn"]
[ext_resource type="PackedScene" uid="uid://c8kt5332g6ce" path="res://Scenes/Characters/health_component.tscn" id="3_73fnk"]
[ext_resource type="PackedScene" uid="uid://dyuwlkesyh1dr" path="res://Scenes/Characters/area_attack.tscn" id="4_joj4s"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_0pqjn"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_73fnk"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_flmpx")

[node name="HealthComponent" parent="." node_paths=PackedStringArray("body") instance=ExtResource("3_73fnk")]
body = NodePath("..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_0pqjn")

[node name="Rig" parent="." instance=ExtResource("2_0pqjn")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Skeleton3D" parent="Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(4.44089e-15, 0.910093, -0.0481736)
bones/2/rotation = Quaternion(0.00654517, -0.00028015, 0.00321131, 0.999973)
bones/3/rotation = Quaternion(-0.0889354, -0.000281798, 0.00852459, 0.996001)
bones/4/rotation = Quaternion(0.270165, 1.44172e-08, 9.17384e-08, 0.962814)
bones/6/rotation = Quaternion(-0.16484, -1.17579e-07, -1.96505e-08, 0.98632)
bones/7/position = Vector3(-2.90308e-08, 0.910093, -0.0481735)
bones/8/position = Vector3(-7.5499e-08, 0.910093, -0.0481735)
bones/9/position = Vector3(0.131144, 0.976298, -0.0351291)
bones/9/rotation = Quaternion(0.994249, 0.0202465, -0.0312488, 0.100409)
bones/11/rotation = Quaternion(0.394955, -0.000695088, 0.000298945, 0.9187)
bones/13/rotation = Quaternion(-0.740755, 0.0118454, 0.0243605, 0.671229)
bones/15/position = Vector3(-0.131144, 0.976297, -0.0351291)
bones/15/rotation = Quaternion(0.975806, -0.00528024, 0.0276703, 0.216818)
bones/17/rotation = Quaternion(0.42116, 0.00315496, -0.0014651, 0.90698)
bones/19/rotation = Quaternion(-0.678135, -0.0281384, -0.00144693, 0.734397)
bones/21/position = Vector3(0.0251286, 1.43968, 0.047153)
bones/21/rotation = Quaternion(-0.470697, -0.267168, -0.416613, 0.730411)
bones/22/position = Vector3(0.191421, 1.4785, -0.0101136)
bones/22/rotation = Quaternion(0.0215208, -0.163982, 0.975479, -0.145216)
bones/23/rotation = Quaternion(8.76723e-08, -0.0388896, -3.35714e-09, 0.999244)
bones/24/rotation = Quaternion(0.351155, -0.0389518, -0.0219241, 0.93525)
bones/46/position = Vector3(-0.0113635, 1.43968, 0.0471529)
bones/46/rotation = Quaternion(-0.471397, 0.26392, 0.414944, 0.732088)
bones/47/position = Vector3(-0.177195, 1.47875, -0.0112781)
bones/47/rotation = Quaternion(-0.011587, -0.147561, 0.976044, 0.159465)
bones/48/rotation = Quaternion(2.00088e-08, 0.0565534, 7.81316e-08, 0.9984)
bones/49/rotation = Quaternion(0.391747, 0.0565539, 0.0279332, 0.917908)
bones/71/position = Vector3(0.127191, 1.36064, -0.024477)
bones/71/rotation = Quaternion(2.02943e-08, 0.598631, 0.801025, -4.58632e-08)
bones/72/position = Vector3(-0.113426, 1.36064, -0.024477)
bones/72/rotation = Quaternion(2.02943e-08, 0.598631, 0.801025, -4.58632e-08)

[node name="Knight_02" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="Rig" index="2"]
transform = Transform3D(-0.962344, -0.2708, -0.0237157, 0.221558, -0.831908, 0.508765, -0.157503, 0.484353, 0.860578, -0.351011, 1.01207, 0.0290383)

[node name="LeftHandBone" parent="Rig" index="3"]
transform = Transform3D(-0.970535, 0.23903, 0.0304343, -0.208951, -0.897772, 0.387743, 0.120005, 0.369959, 0.921265, 0.348211, 0.994786, -0.00794991)

[node name="PlayerDetector" type="ShapeCast3D" parent="Rig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_73fnk")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[node name="AreaAttack" parent="Rig" instance=ExtResource("4_joj4s")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1)
collision_mask = 4

[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]
[connection signal="heavy_attack" from="Rig" to="." method="_on_rig_heavy_attack"]

[editable path="Rig"]
[editable path="Rig/CharacterRig"]
